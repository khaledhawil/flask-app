{% extends "base.html" %}

{% block title %}Ø§Ù„Ø­ÙƒÙ… ÙˆØ§Ù„Ø£Ù‚ÙˆØ§Ù„ Ø§Ù„Ø¥Ø³Ù„Ø§Ù…ÙŠØ©{% endblock %}

{% block extra_css %}
<style>
    .wisdom-container {
        max-width: 1200px;
        margin: 0 auto;
        padding: 20px;
        direction: rtl;
    }

    .wisdom-header {
        text-align: center;
        margin-bottom: 40px;
        padding: 30px;
        background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
        color: white;
        border-radius: 20px;
        box-shadow: 0 8px 32px rgba(0,0,0,0.1);
    }

    .wisdom-header h1 {
        margin: 0 0 15px 0;
        font-size: 2.5em;
    }

    .wisdom-grid {
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(350px, 1fr));
        gap: 25px;
        margin: 30px 0;
    }

    .wisdom-card {
        background: white;
        border-radius: 15px;
        padding: 25px;
        box-shadow: 0 4px 20px rgba(0,0,0,0.1);
        transition: all 0.3s ease;
        border-right: 5px solid #667eea;
        position: relative;
        overflow: hidden;
    }

    .wisdom-card:hover {
        transform: translateY(-5px);
        box-shadow: 0 8px 30px rgba(0,0,0,0.15);
    }

    .wisdom-card::before {
        content: '';
        position: absolute;
        top: 0;
        right: 0;
        width: 100px;
        height: 100px;
        background: linear-gradient(135deg, rgba(102, 126, 234, 0.1), transparent);
        border-radius: 0 0 0 100px;
    }

    .wisdom-text {
        font-size: 1.2em;
        line-height: 1.8;
        color: #333;
        margin-bottom: 15px;
        font-weight: 500;
        position: relative;
        z-index: 2;
    }

    .wisdom-source {
        color: #667eea;
        font-weight: bold;
        font-size: 0.9em;
        border-top: 1px solid #eee;
        padding-top: 15px;
        position: relative;
        z-index: 2;
    }

    .wisdom-category {
        background: linear-gradient(135deg, #667eea, #764ba2);
        color: white;
        padding: 5px 15px;
        border-radius: 20px;
        font-size: 0.8em;
        position: absolute;
        top: 15px;
        left: 15px;
        z-index: 3;
    }

    .daily-wisdom {
        background: linear-gradient(135deg, #ffecd2 0%, #fcb69f 100%);
        color: #333;
        padding: 30px;
        border-radius: 20px;
        margin: 30px 0;
        text-align: center;
        border: 3px solid #f39c12;
    }

    .daily-wisdom h3 {
        color: #d68910;
        margin-bottom: 20px;
        font-size: 1.5em;
    }

    .daily-wisdom-text {
        font-size: 1.3em;
        line-height: 1.8;
        margin-bottom: 15px;
        font-weight: 600;
    }

    .filter-tabs {
        display: flex;
        justify-content: center;
        margin: 30px 0;
        flex-wrap: wrap;
        gap: 10px;
    }

    .filter-tab {
        background: #f8f9fa;
        border: 2px solid #667eea;
        color: #667eea;
        padding: 12px 25px;
        border-radius: 25px;
        cursor: pointer;
        transition: all 0.3s ease;
        font-weight: 500;
    }

    .filter-tab.active {
        background: #667eea;
        color: white;
    }

    .filter-tab:hover {
        background: #667eea;
        color: white;
        transform: translateY(-2px);
    }

    .action-buttons {
        text-align: center;
        margin: 30px 0;
    }

    .action-btn {
        background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
        color: white;
        border: none;
        padding: 15px 30px;
        border-radius: 25px;
        cursor: pointer;
        margin: 10px;
        font-size: 1em;
        transition: all 0.3s ease;
        box-shadow: 0 4px 15px rgba(102, 126, 234, 0.3);
    }

    .action-btn:hover {
        transform: translateY(-3px);
        box-shadow: 0 6px 20px rgba(102, 126, 234, 0.4);
    }

    .search-bar {
        max-width: 500px;
        margin: 20px auto;
        position: relative;
    }

    .search-input {
        width: 100%;
        padding: 15px 50px 15px 20px;
        border: 2px solid #667eea;
        border-radius: 25px;
        font-size: 1em;
        direction: rtl;
    }

    .search-btn {
        position: absolute;
        left: 10px;
        top: 50%;
        transform: translateY(-50%);
        background: #667eea;
        color: white;
        border: none;
        padding: 8px 12px;
        border-radius: 50%;
        cursor: pointer;
    }

    .wisdom-stats {
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
        gap: 20px;
        margin: 30px 0;
    }

    .stat-card {
        background: white;
        padding: 20px;
        border-radius: 10px;
        text-align: center;
        box-shadow: 0 2px 10px rgba(0,0,0,0.1);
    }

    .stat-number {
        font-size: 2em;
        font-weight: bold;
        color: #667eea;
        margin-bottom: 10px;
    }

    .stat-label {
        color: #666;
    }

    .share-card {
        position: relative;
        background: linear-gradient(135deg, #a8edea 0%, #fed6e3 100%);
        margin: 10px 0;
    }

    .share-btns {
        position: absolute;
        top: 15px;
        left: 15px;
        display: flex;
        gap: 5px;
        opacity: 0;
        transition: opacity 0.3s ease;
    }

    .wisdom-card:hover .share-btns {
        opacity: 1;
    }

    .share-btn {
        background: rgba(255,255,255,0.9);
        border: none;
        padding: 8px;
        border-radius: 50%;
        cursor: pointer;
        font-size: 12px;
        transition: all 0.3s ease;
    }

    .share-btn:hover {
        background: white;
        transform: scale(1.1);
    }

    @media (max-width: 768px) {
        .wisdom-grid {
            grid-template-columns: 1fr;
        }
        
        .filter-tabs {
            overflow-x: auto;
            justify-content: flex-start;
            padding: 0 20px;
        }
        
        .wisdom-header h1 {
            font-size: 2em;
        }
    }
</style>
{% endblock %}

{% block content %}
<div class="wisdom-container">
    <div class="wisdom-header">
        <h1>ğŸ’ Ø§Ù„Ø­ÙƒÙ… ÙˆØ§Ù„Ø£Ù‚ÙˆØ§Ù„ Ø§Ù„Ø¥Ø³Ù„Ø§Ù…ÙŠØ©</h1>
        <p>Ù…Ø¬Ù…ÙˆØ¹Ø© Ù…Ø®ØªØ§Ø±Ø© Ù…Ù† Ø§Ù„Ø­ÙƒÙ… ÙˆØ§Ù„Ø£Ù‚ÙˆØ§Ù„ Ø§Ù„Ø¥Ø³Ù„Ø§Ù…ÙŠØ© Ø§Ù„Ù…Ø¤Ø«Ø±Ø© Ù…Ù† Ø§Ù„Ù‚Ø±Ø¢Ù† ÙˆØ§Ù„Ø³Ù†Ø© Ø§Ù„Ù†Ø¨ÙˆÙŠØ©</p>
    </div>

    <!-- Daily Wisdom -->
    <div class="daily-wisdom">
        <h3>ğŸŒŸ Ø­ÙƒÙ…Ø© Ø§Ù„ÙŠÙˆÙ…</h3>
        <div class="daily-wisdom-text" id="dailyWisdomText">
            ÙˆÙØ§Ø°Ù’ÙƒÙØ±ÙÙˆØ§ Ø§Ù„Ù„ÙÙ‘Ù‡Ù ÙƒÙØ«ÙÙŠØ±Ù‹Ø§ Ù„ÙÙ‘Ø¹ÙÙ„ÙÙ‘ÙƒÙÙ…Ù’ ØªÙÙÙ’Ù„ÙØ­ÙÙˆÙ†Ù
        </div>
        <div class="wisdom-source">Ø§Ù„Ù‚Ø±Ø¢Ù† Ø§Ù„ÙƒØ±ÙŠÙ… - Ø§Ù„Ø£Ù†ÙØ§Ù„: 45</div>
    </div>

    <!-- Search Bar -->
    <div class="search-bar">
        <input type="text" class="search-input" placeholder="Ø§Ø¨Ø­Ø« ÙÙŠ Ø§Ù„Ø­ÙƒÙ… ÙˆØ§Ù„Ø£Ù‚ÙˆØ§Ù„..." id="searchInput">
        <button class="search-btn" onclick="searchWisdom()">
            <i class="fas fa-search"></i>
        </button>
    </div>

    <!-- Filter Tabs -->
    <div class="filter-tabs">
        <div class="filter-tab active" data-category="all" onclick="filterWisdom('all')">Ø§Ù„ÙƒÙ„</div>
        <div class="filter-tab" data-category="quran" onclick="filterWisdom('quran')">Ø§Ù„Ù‚Ø±Ø¢Ù† Ø§Ù„ÙƒØ±ÙŠÙ…</div>
        <div class="filter-tab" data-category="hadith" onclick="filterWisdom('hadith')">Ø§Ù„Ø£Ø­Ø§Ø¯ÙŠØ« Ø§Ù„Ù†Ø¨ÙˆÙŠØ©</div>
        <div class="filter-tab" data-category="scholars" onclick="filterWisdom('scholars')">Ø£Ù‚ÙˆØ§Ù„ Ø§Ù„Ø¹Ù„Ù…Ø§Ø¡</div>
        <div class="filter-tab" data-category="supplications" onclick="filterWisdom('supplications')">Ø§Ù„Ø£Ø¯Ø¹ÙŠØ©</div>
        <div class="filter-tab" data-category="motivational" onclick="filterWisdom('motivational')">ØªØ­ÙÙŠØ²ÙŠØ©</div>
    </div>

    <!-- Statistics -->
    <div class="wisdom-stats">
        <div class="stat-card">
            <div class="stat-number" id="totalWisdom">150+</div>
            <div class="stat-label">Ø¥Ø¬Ù…Ø§Ù„ÙŠ Ø§Ù„Ø­ÙƒÙ…</div>
        </div>
        <div class="stat-card">
            <div class="stat-number" id="todayViews">0</div>
            <div class="stat-label">Ø§Ù„Ù…Ø´Ø§Ù‡Ø¯Ø§Øª Ø§Ù„ÙŠÙˆÙ…</div>
        </div>
        <div class="stat-card">
            <div class="stat-number" id="favoriteCount">0</div>
            <div class="stat-label">Ø§Ù„Ù…ÙØ¶Ù„Ø©</div>
        </div>
        <div class="stat-card">
            <div class="stat-number" id="sharedCount">0</div>
            <div class="stat-label">ØªÙ… Ù…Ø´Ø§Ø±ÙƒØªÙ‡Ø§</div>
        </div>
    </div>

    <!-- Action Buttons -->
    <div class="action-buttons">
        <button class="action-btn" onclick="showRandomWisdom()">
            <i class="fas fa-random"></i> Ø­ÙƒÙ…Ø© Ø¹Ø´ÙˆØ§Ø¦ÙŠØ©
        </button>
        <button class="action-btn" onclick="toggleFavorites()">
            <i class="fas fa-heart"></i> Ø§Ù„Ù…ÙØ¶Ù„Ø©
        </button>
        <button class="action-btn" onclick="enableNotifications()">
            <i class="fas fa-bell"></i> ØªÙ†Ø¨ÙŠÙ‡Ø§Øª ÙŠÙˆÙ…ÙŠØ©
        </button>
        <button class="action-btn" onclick="exportWisdom()">
            <i class="fas fa-download"></i> ØªØµØ¯ÙŠØ±
        </button>
    </div>

    <!-- Wisdom Cards -->
    <div class="wisdom-grid" id="wisdomGrid">
        <!-- Cards will be populated by JavaScript -->
    </div>
</div>

<script>
// Islamic wisdom data
const wisdomData = [
    // Quran Verses
    {
        id: 1,
        text: "ÙˆÙÙ…ÙÙ†Ù’ ÙŠÙØªÙÙ‘Ù‚Ù Ø§Ù„Ù„ÙÙ‘Ù‡Ù ÙŠÙØ¬Ù’Ø¹ÙÙ„ Ù„ÙÙ‘Ù‡Ù Ù…ÙØ®Ù’Ø±ÙØ¬Ù‹Ø§",
        source: "Ø§Ù„Ù‚Ø±Ø¢Ù† Ø§Ù„ÙƒØ±ÙŠÙ… - Ø§Ù„Ø·Ù„Ø§Ù‚: 2",
        category: "quran",
        tags: ["ØªÙ‚ÙˆÙ‰", "ÙØ±Ø¬", "Ù…Ø®Ø±Ø¬"]
    },
    {
        id: 2,
        text: "ÙˆÙØ§ØµÙ’Ø¨ÙØ±Ù’ ÙˆÙÙ…ÙØ§ ØµÙØ¨Ù’Ø±ÙÙƒÙ Ø¥ÙÙ„ÙÙ‘Ø§ Ø¨ÙØ§Ù„Ù„ÙÙ‘Ù‡Ù",
        source: "Ø§Ù„Ù‚Ø±Ø¢Ù† Ø§Ù„ÙƒØ±ÙŠÙ… - Ø§Ù„Ù†Ø­Ù„: 127",
        category: "quran",
        tags: ["ØµØ¨Ø±", "Ù‚ÙˆØ©", "ØªØ­Ù…Ù„"]
    },
    {
        id: 3,
        text: "Ø¥ÙÙ†ÙÙ‘ Ù…ÙØ¹Ù Ø§Ù„Ù’Ø¹ÙØ³Ù’Ø±Ù ÙŠÙØ³Ù’Ø±Ù‹Ø§",
        source: "Ø§Ù„Ù‚Ø±Ø¢Ù† Ø§Ù„ÙƒØ±ÙŠÙ… - Ø§Ù„Ø´Ø±Ø­: 6",
        category: "quran",
        tags: ["Ø£Ù…Ù„", "ØªÙØ§Ø¤Ù„", "ÙØ±Ø¬"]
    },
    {
        id: 4,
        text: "ÙˆÙÙ‡ÙÙˆÙ Ù…ÙØ¹ÙÙƒÙÙ…Ù’ Ø£ÙÙŠÙ’Ù†Ù Ù…ÙØ§ ÙƒÙÙ†ØªÙÙ…Ù’",
        source: "Ø§Ù„Ù‚Ø±Ø¢Ù† Ø§Ù„ÙƒØ±ÙŠÙ… - Ø§Ù„Ø­Ø¯ÙŠØ¯: 4",
        category: "quran",
        tags: ["Ù…Ø¹ÙŠØ©", "Ù‚Ø±Ø¨", "Ø·Ù…Ø£Ù†ÙŠÙ†Ø©"]
    },
    {
        id: 5,
        text: "ÙÙØ§Ø°Ù’ÙƒÙØ±ÙÙˆÙ†ÙÙŠ Ø£ÙØ°Ù’ÙƒÙØ±Ù’ÙƒÙÙ…Ù’ ÙˆÙØ§Ø´Ù’ÙƒÙØ±ÙÙˆØ§ Ù„ÙÙŠ ÙˆÙÙ„ÙØ§ ØªÙÙƒÙ’ÙÙØ±ÙÙˆÙ†Ù",
        source: "Ø§Ù„Ù‚Ø±Ø¢Ù† Ø§Ù„ÙƒØ±ÙŠÙ… - Ø§Ù„Ø¨Ù‚Ø±Ø©: 152",
        category: "quran",
        tags: ["Ø°ÙƒØ±", "Ø´ÙƒØ±", "Ø°ÙƒØ± Ø§Ù„Ù„Ù‡"]
    },

    // Hadith
    {
        id: 6,
        text: "Ø¥Ù†Ù…Ø§ Ø§Ù„Ø£Ø¹Ù…Ø§Ù„ Ø¨Ø§Ù„Ù†ÙŠØ§Øª",
        source: "ØµØ­ÙŠØ­ Ø§Ù„Ø¨Ø®Ø§Ø±ÙŠ",
        category: "hadith",
        tags: ["Ù†ÙŠØ©", "Ø¥Ø®Ù„Ø§Øµ", "Ø£Ø¹Ù…Ø§Ù„"]
    },
    {
        id: 7,
        text: "Ø§Ù„Ù…Ø¤Ù…Ù† Ù„Ù„Ù…Ø¤Ù…Ù† ÙƒØ§Ù„Ø¨Ù†ÙŠØ§Ù† ÙŠØ´Ø¯ Ø¨Ø¹Ø¶Ù‡ Ø¨Ø¹Ø¶Ø§Ù‹",
        source: "ØµØ­ÙŠØ­ Ø§Ù„Ø¨Ø®Ø§Ø±ÙŠ",
        category: "hadith",
        tags: ["Ø£Ø®ÙˆØ©", "ØªØ¹Ø§ÙˆÙ†", "ÙˆØ­Ø¯Ø©"]
    },
    {
        id: 8,
        text: "Ù…Ù† Ù„Ù… ÙŠØ´ÙƒØ± Ø§Ù„Ù†Ø§Ø³ Ù„Ù… ÙŠØ´ÙƒØ± Ø§Ù„Ù„Ù‡",
        source: "Ø³Ù†Ù† Ø£Ø¨ÙŠ Ø¯Ø§ÙˆØ¯",
        category: "hadith",
        tags: ["Ø´ÙƒØ±", "Ø§Ù…ØªÙ†Ø§Ù†", "Ø£Ø¯Ø¨"]
    },
    {
        id: 9,
        text: "Ø§Ù„Ø¯Ù†ÙŠØ§ Ø³Ø§Ø¹Ø© ÙØ§Ø¬Ø¹Ù„Ù‡Ø§ Ø·Ø§Ø¹Ø©",
        source: "Ø­Ø¯ÙŠØ« Ø´Ø±ÙŠÙ",
        category: "hadith",
        tags: ["Ø¯Ù†ÙŠØ§", "Ø·Ø§Ø¹Ø©", "Ø­ÙƒÙ…Ø©"]
    },
    {
        id: 10,
        text: "Ø®ÙŠØ± Ø§Ù„Ù†Ø§Ø³ Ø£Ù†ÙØ¹Ù‡Ù… Ù„Ù„Ù†Ø§Ø³",
        source: "Ø­Ø¯ÙŠØ« Ø´Ø±ÙŠÙ",
        category: "hadith",
        tags: ["Ù†ÙØ¹", "Ø®ÙŠØ±", "Ø®Ø¯Ù…Ø©"]
    },

    // Scholars' Sayings
    {
        id: 11,
        text: "Ø¥Ø°Ø§ Ù„Ù… ØªØ³ØªØ·Ø¹ Ø£Ù† ØªÙ†ÙØ¹ Ø§Ù„Ù†Ø§Ø³ Ø¨Ù…Ø§Ù„Ùƒ ÙØ§Ù†ÙØ¹Ù‡Ù… Ø¨Ø£Ø®Ù„Ø§Ù‚Ùƒ",
        source: "Ø§Ù„Ø¥Ù…Ø§Ù… Ø§Ù„Ø´Ø§ÙØ¹ÙŠ",
        category: "scholars",
        tags: ["Ø£Ø®Ù„Ø§Ù‚", "Ù†ÙØ¹", "Ø³Ù„ÙˆÙƒ"]
    },
    {
        id: 12,
        text: "Ø§Ù„Ø¹Ù„Ù… ÙÙŠ Ø§Ù„ØµØºØ± ÙƒØ§Ù„Ù†Ù‚Ø´ Ø¹Ù„Ù‰ Ø§Ù„Ø­Ø¬Ø±",
        source: "Ø­ÙƒÙ…Ø© Ø¹Ø±Ø¨ÙŠØ©",
        category: "scholars",
        tags: ["Ø¹Ù„Ù…", "ØªØ¹Ù„Ù…", "ØµØºØ±"]
    },
    {
        id: 13,
        text: "Ù…Ù† Ø·Ù„Ø¨ Ø§Ù„Ø¹Ù„Ø§ Ø³Ù‡Ø± Ø§Ù„Ù„ÙŠØ§Ù„ÙŠ",
        source: "Ø­ÙƒÙ…Ø© Ø¹Ø±Ø¨ÙŠØ©",
        category: "scholars",
        tags: ["Ø·Ù…ÙˆØ­", "Ø¹Ù„Ø§", "Ø§Ø¬ØªÙ‡Ø§Ø¯"]
    },
    {
        id: 14,
        text: "Ø§Ù„ØµØ¨Ø± Ù…ÙØªØ§Ø­ Ø§Ù„ÙØ±Ø¬",
        source: "Ø­ÙƒÙ…Ø© Ø¥Ø³Ù„Ø§Ù…ÙŠØ©",
        category: "scholars",
        tags: ["ØµØ¨Ø±", "ÙØ±Ø¬", "Ù…ÙØªØ§Ø­"]
    },
    {
        id: 15,
        text: "Ø§Ø­Ø±Øµ Ø¹Ù„Ù‰ Ù…Ø§ ÙŠÙ†ÙØ¹Ùƒ ÙˆØ§Ø³ØªØ¹Ù† Ø¨Ø§Ù„Ù„Ù‡",
        source: "Ø§Ù„Ø¥Ù…Ø§Ù… Ø§Ù„Ù†ÙˆÙˆÙŠ",
        category: "scholars",
        tags: ["Ø­Ø±Øµ", "Ù†ÙØ¹", "Ø§Ø³ØªØ¹Ø§Ù†Ø©"]
    },

    // Supplications
    {
        id: 16,
        text: "Ø±ÙØ¨ÙÙ‘Ù†ÙØ§ Ø¢ØªÙÙ†ÙØ§ ÙÙÙŠ Ø§Ù„Ø¯ÙÙ‘Ù†Ù’ÙŠÙØ§ Ø­ÙØ³ÙÙ†ÙØ©Ù‹ ÙˆÙÙÙÙŠ Ø§Ù„Ù’Ø¢Ø®ÙØ±ÙØ©Ù Ø­ÙØ³ÙÙ†ÙØ©Ù‹ ÙˆÙÙ‚ÙÙ†ÙØ§ Ø¹ÙØ°ÙØ§Ø¨Ù Ø§Ù„Ù†ÙÙ‘Ø§Ø±Ù",
        source: "Ø¯Ø¹Ø§Ø¡ Ù…Ù† Ø§Ù„Ù‚Ø±Ø¢Ù† - Ø§Ù„Ø¨Ù‚Ø±Ø©: 201",
        category: "supplications",
        tags: ["Ø¯Ø¹Ø§Ø¡", "Ø­Ø³Ù†Ø©", "Ø¢Ø®Ø±Ø©"]
    },
    {
        id: 17,
        text: "Ø±ÙØ¨ÙÙ‘ Ø§Ø´Ù’Ø±ÙØ­Ù’ Ù„ÙÙŠ ØµÙØ¯Ù’Ø±ÙÙŠ ÙˆÙÙŠÙØ³ÙÙ‘Ø±Ù’ Ù„ÙÙŠ Ø£ÙÙ…Ù’Ø±ÙÙŠ",
        source: "Ø¯Ø¹Ø§Ø¡ Ù…ÙˆØ³Ù‰ Ø¹Ù„ÙŠÙ‡ Ø§Ù„Ø³Ù„Ø§Ù… - Ø·Ù‡: 25-26",
        category: "supplications",
        tags: ["Ø´Ø±Ø­ ØµØ¯Ø±", "ØªÙŠØ³ÙŠØ±", "Ø¯Ø¹Ø§Ø¡"]
    },
    {
        id: 18,
        text: "Ø§Ù„Ù„Ù‡Ù… Ø£Ø¹Ù†ÙŠ Ø¹Ù„Ù‰ Ø°ÙƒØ±Ùƒ ÙˆØ´ÙƒØ±Ùƒ ÙˆØ­Ø³Ù† Ø¹Ø¨Ø§Ø¯ØªÙƒ",
        source: "Ø¯Ø¹Ø§Ø¡ Ù†Ø¨ÙˆÙŠ",
        category: "supplications",
        tags: ["Ø°ÙƒØ±", "Ø´ÙƒØ±", "Ø¹Ø¨Ø§Ø¯Ø©"]
    },

    // Motivational
    {
        id: 19,
        text: "Ù„Ø§ ØªÙŠØ£Ø³ØŒ ÙØ§Ù„Ù„Ù‡ Ù…Ø¹ Ø§Ù„ØµØ§Ø¨Ø±ÙŠÙ†",
        source: "Ø­ÙƒÙ…Ø© Ø¥Ø³Ù„Ø§Ù…ÙŠØ©",
        category: "motivational",
        tags: ["Ø£Ù…Ù„", "ØµØ¨Ø±", "ØªØ­ÙÙŠØ²"]
    },
    {
        id: 20,
        text: "ÙƒÙ„ Ø¹Ù…Ù„ Ø§Ø¨Ù† Ø¢Ø¯Ù… Ù„Ù‡ Ø¥Ù„Ø§ Ø§Ù„ØµÙˆÙ… ÙØ¥Ù†Ù‡ Ù„ÙŠ ÙˆØ£Ù†Ø§ Ø£Ø¬Ø²ÙŠ Ø¨Ù‡",
        source: "Ø­Ø¯ÙŠØ« Ù‚Ø¯Ø³ÙŠ",
        category: "motivational",
        tags: ["ØµÙˆÙ…", "Ø¬Ø²Ø§Ø¡", "Ø¹Ø¨Ø§Ø¯Ø©"]
    }
];

let currentFilter = 'all';
let favorites = JSON.parse(localStorage.getItem('wisdomFavorites')) || [];
let showingFavorites = false;
let viewedToday = JSON.parse(localStorage.getItem('wisdomViewedToday')) || 0;

// Initialize page
document.addEventListener('DOMContentLoaded', function() {
    displayWisdom();
    updateStats();
    setDailyWisdom();
    
    // Setup search
    document.getElementById('searchInput').addEventListener('input', searchWisdom);
});

function displayWisdom(data = wisdomData) {
    const grid = document.getElementById('wisdomGrid');
    const filteredData = showingFavorites 
        ? data.filter(item => favorites.includes(item.id))
        : data;
    
    if (filteredData.length === 0) {
        grid.innerHTML = `
            <div style="text-align: center; grid-column: 1 / -1; padding: 40px;">
                <i class="fas fa-search" style="font-size: 3em; color: #ccc; margin-bottom: 20px;"></i>
                <p style="color: #666; font-size: 1.2em;">
                    ${showingFavorites ? 'Ù„Ø§ ØªÙˆØ¬Ø¯ Ø­ÙƒÙ… Ù…ÙØ¶Ù„Ø© Ø¨Ø¹Ø¯' : 'Ù„Ù… ÙŠØªÙ… Ø§Ù„Ø¹Ø«ÙˆØ± Ø¹Ù„Ù‰ Ù†ØªØ§Ø¦Ø¬'}
                </p>
            </div>
        `;
        return;
    }
    
    grid.innerHTML = filteredData.map(wisdom => `
        <div class="wisdom-card ${favorites.includes(wisdom.id) ? 'share-card' : ''}" data-category="${wisdom.category}">
            <div class="wisdom-category">${getCategoryName(wisdom.category)}</div>
            <div class="share-btns">
                <button class="share-btn" onclick="shareWisdom(${wisdom.id})" title="Ù…Ø´Ø§Ø±ÙƒØ©">
                    <i class="fas fa-share"></i>
                </button>
                <button class="share-btn" onclick="copyWisdom(${wisdom.id})" title="Ù†Ø³Ø®">
                    <i class="fas fa-copy"></i>
                </button>
                <button class="share-btn ${favorites.includes(wisdom.id) ? 'active' : ''}" 
                        onclick="toggleFavorite(${wisdom.id})" title="Ù…ÙØ¶Ù„Ø©">
                    <i class="fas fa-heart" style="color: ${favorites.includes(wisdom.id) ? '#e74c3c' : '#ccc'}"></i>
                </button>
            </div>
            <div class="wisdom-text">${wisdom.text}</div>
            <div class="wisdom-source">${wisdom.source}</div>
        </div>
    `).join('');
}

function filterWisdom(category) {
    currentFilter = category;
    
    // Update active tab
    document.querySelectorAll('.filter-tab').forEach(tab => {
        tab.classList.remove('active');
    });
    document.querySelector(`[data-category="${category}"]`).classList.add('active');
    
    // Filter data
    const filteredData = category === 'all' 
        ? wisdomData 
        : wisdomData.filter(item => item.category === category);
    
    displayWisdom(filteredData);
}

function searchWisdom() {
    const searchTerm = document.getElementById('searchInput').value.toLowerCase();
    
    if (!searchTerm) {
        filterWisdom(currentFilter);
        return;
    }
    
    const searchResults = wisdomData.filter(wisdom => 
        wisdom.text.toLowerCase().includes(searchTerm) ||
        wisdom.source.toLowerCase().includes(searchTerm) ||
        wisdom.tags.some(tag => tag.includes(searchTerm))
    );
    
    displayWisdom(searchResults);
}

function getCategoryName(category) {
    const names = {
        'quran': 'Ù‚Ø±Ø¢Ù†',
        'hadith': 'Ø­Ø¯ÙŠØ«',
        'scholars': 'Ø¹Ù„Ù…Ø§Ø¡',
        'supplications': 'Ø¯Ø¹Ø§Ø¡',
        'motivational': 'ØªØ­ÙÙŠØ²'
    };
    return names[category] || category;
}

function showRandomWisdom() {
    const randomWisdom = wisdomData[Math.floor(Math.random() * wisdomData.length)];
    
    // Create modal or highlight the wisdom
    const modal = document.createElement('div');
    modal.innerHTML = `
        <div style="position: fixed; top: 0; left: 0; width: 100%; height: 100%; 
                    background: rgba(0,0,0,0.8); z-index: 1000; display: flex; 
                    align-items: center; justify-content: center; direction: rtl;">
            <div style="background: white; padding: 40px; border-radius: 20px; 
                        max-width: 600px; margin: 20px; text-align: center;">
                <div style="font-size: 1.5em; margin-bottom: 20px; line-height: 1.8;">
                    ${randomWisdom.text}
                </div>
                <div style="color: #667eea; font-weight: bold; margin-bottom: 30px;">
                    ${randomWisdom.source}
                </div>
                <button onclick="this.parentElement.parentElement.remove()" 
                        style="background: #667eea; color: white; border: none; 
                               padding: 12px 25px; border-radius: 25px; cursor: pointer;">
                    Ø¥ØºÙ„Ø§Ù‚
                </button>
            </div>
        </div>
    `;
    document.body.appendChild(modal);
    
    // Increment views
    viewedToday++;
    localStorage.setItem('wisdomViewedToday', JSON.stringify(viewedToday));
    updateStats();
}

function toggleFavorite(id) {
    if (favorites.includes(id)) {
        favorites = favorites.filter(fav => fav !== id);
    } else {
        favorites.push(id);
    }
    
    localStorage.setItem('wisdomFavorites', JSON.stringify(favorites));
    displayWisdom();
    updateStats();
}

function toggleFavorites() {
    showingFavorites = !showingFavorites;
    const btn = event.target;
    
    if (showingFavorites) {
        btn.innerHTML = '<i class="fas fa-list"></i> Ø¹Ø±Ø¶ Ø§Ù„ÙƒÙ„';
        btn.style.background = '#e74c3c';
    } else {
        btn.innerHTML = '<i class="fas fa-heart"></i> Ø§Ù„Ù…ÙØ¶Ù„Ø©';
        btn.style.background = 'linear-gradient(135deg, #667eea 0%, #764ba2 100%)';
    }
    
    displayWisdom();
}

function shareWisdom(id) {
    const wisdom = wisdomData.find(w => w.id === id);
    
    if (navigator.share) {
        navigator.share({
            title: 'Ø­ÙƒÙ…Ø© Ø¥Ø³Ù„Ø§Ù…ÙŠØ©',
            text: `${wisdom.text}\n\n${wisdom.source}`,
            url: window.location.href
        });
    } else {
        copyWisdom(id);
    }
    
    // Increment shared count
    let sharedCount = parseInt(localStorage.getItem('wisdomSharedCount')) || 0;
    sharedCount++;
    localStorage.setItem('wisdomSharedCount', sharedCount.toString());
    updateStats();
}

function copyWisdom(id) {
    const wisdom = wisdomData.find(w => w.id === id);
    const text = `${wisdom.text}\n\n${wisdom.source}`;
    
    navigator.clipboard.writeText(text).then(() => {
        showNotification('ØªÙ… Ù†Ø³Ø® Ø§Ù„Ø­ÙƒÙ…Ø© Ø¨Ù†Ø¬Ø§Ø­');
    }).catch(() => {
        showNotification('ÙØ´Ù„ ÙÙŠ Ø§Ù„Ù†Ø³Ø®');
    });
}

function enableNotifications() {
    if (window.islamicNotifications) {
        window.islamicNotifications.updateReminderSettings('wisdom', { enabled: true });
        showNotification('ØªÙ… ØªÙØ¹ÙŠÙ„ Ø§Ù„ØªÙ†Ø¨ÙŠÙ‡Ø§Øª Ø§Ù„ÙŠÙˆÙ…ÙŠØ© Ù„Ù„Ø­ÙƒÙ… Ø§Ù„Ø¥Ø³Ù„Ø§Ù…ÙŠØ©');
    } else {
        showNotification('Ø®Ø¯Ù…Ø© Ø§Ù„ØªÙ†Ø¨ÙŠÙ‡Ø§Øª ØºÙŠØ± Ù…ØªÙˆÙØ±Ø©');
    }
}

function exportWisdom() {
    const dataToExport = {
        wisdom: wisdomData,
        favorites: favorites,
        stats: {
            totalViewed: viewedToday,
            totalFavorites: favorites.length,
            exportDate: new Date().toISOString()
        }
    };
    
    const dataStr = JSON.stringify(dataToExport, null, 2);
    const dataBlob = new Blob([dataStr], {type: 'application/json'});
    const url = URL.createObjectURL(dataBlob);
    
    const link = document.createElement('a');
    link.href = url;
    link.download = `islamic-wisdom-${new Date().toISOString().split('T')[0]}.json`;
    link.click();
    
    showNotification('ØªÙ… ØªØµØ¯ÙŠØ± Ø§Ù„Ø­ÙƒÙ… Ø§Ù„Ø¥Ø³Ù„Ø§Ù…ÙŠØ©');
}

function setDailyWisdom() {
    const today = new Date().toDateString();
    const lastDate = localStorage.getItem('dailyWisdomDate');
    
    if (lastDate !== today) {
        const dailyWisdom = wisdomData[Math.floor(Math.random() * wisdomData.length)];
        document.getElementById('dailyWisdomText').textContent = dailyWisdom.text;
        document.querySelector('.daily-wisdom .wisdom-source').textContent = dailyWisdom.source;
        
        localStorage.setItem('dailyWisdomDate', today);
        localStorage.setItem('dailyWisdomId', dailyWisdom.id.toString());
    } else {
        const savedId = localStorage.getItem('dailyWisdomId');
        if (savedId) {
            const dailyWisdom = wisdomData.find(w => w.id === parseInt(savedId));
            if (dailyWisdom) {
                document.getElementById('dailyWisdomText').textContent = dailyWisdom.text;
                document.querySelector('.daily-wisdom .wisdom-source').textContent = dailyWisdom.source;
            }
        }
    }
}

function updateStats() {
    document.getElementById('totalWisdom').textContent = wisdomData.length;
    document.getElementById('todayViews').textContent = viewedToday;
    document.getElementById('favoriteCount').textContent = favorites.length;
    
    const sharedCount = localStorage.getItem('wisdomSharedCount') || '0';
    document.getElementById('sharedCount').textContent = sharedCount;
}

function showNotification(message) {
    // Create notification
    const notification = document.createElement('div');
    notification.innerHTML = message;
    notification.style.cssText = `
        position: fixed; top: 20px; right: 20px; background: #28a745; 
        color: white; padding: 15px 25px; border-radius: 8px; 
        z-index: 1000; box-shadow: 0 4px 12px rgba(0,0,0,0.3);
        transform: translateX(100%); transition: transform 0.3s ease;
    `;
    
    document.body.appendChild(notification);
    
    // Show notification
    setTimeout(() => {
        notification.style.transform = 'translateX(0)';
    }, 100);
    
    // Hide notification
    setTimeout(() => {
        notification.style.transform = 'translateX(100%)';
        setTimeout(() => notification.remove(), 300);
    }, 3000);
}

// Reset daily views at midnight
const now = new Date();
const lastViewDate = localStorage.getItem('wisdomViewDate');
if (lastViewDate !== now.toDateString()) {
    localStorage.setItem('wisdomViewedToday', '0');
    localStorage.setItem('wisdomViewDate', now.toDateString());
    viewedToday = 0;
}
</script>
{% endblock %}
